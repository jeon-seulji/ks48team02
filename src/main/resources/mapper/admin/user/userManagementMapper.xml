<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart.ks48team02.admin.mapper.user.UserManagementMapper">

    <!-- 로그인 로그 resultMap-->
    <resultMap id="loginLogResultMap" type="UserManagement" >
        <id property="loginLogCode" column="login_log_code"/>
        <result property ="memberId" column="member_id"/>
        <result property="loginTime" column="login_time"/>
        <result property="logoutTime" column="logout_time"/>
        <result property="clientNetAddress" column="client_net_address"/>
    </resultMap>

<!--    &lt;!&ndash;회원 resultMap &ndash;&gt;-->
<!--    <resultMap type="Member" id="memberResultMap">-->
<!--        <id property="memberId" column="member_id"/>-->
<!--        <result property ="memberTypeCode" column="member_type_code"/>-->
<!--        <result property="memberName" column="member_name"/>-->
<!--        <result property="memberPw" column="member_pw"/>-->
<!--        <result property="memberRegDate" column="member_reg_date"/>-->
<!--        <result property="memberEmail" column="member_email"/>-->
<!--        <result property="memberContactInfo" column="contact_info"/>-->
<!--        <result property="unRegDate" column="unreg_date"/>-->
<!--        <result property="unRegStatus" column="unreg_status"/>-->
<!--    </resultMap>-->

    <!-- 회원 아이디로 로그인 정보 조회-->
    <select id="getLoginLogById" parameterType="String" resultMap="loginLogResultMap">
        SELECT
            login_log_code,
            member_id,
            login_time,
            logout_time,
            client_net_address
        FROM
            login_log
        <where>
            <if test="memberId != null and memberId != ''">
                member_id = #{memberId}
            </if>
            <if test="startDate != null and startDate != ''">
                AND login_time >= #{startDate}
            </if>
            <if test="endDate != null and endDate != ''">
                AND logout_time <![CDATA[<=]]> #{endDate}
            </if>
        </where>

    </select>


</mapper>