<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/default}">

<head>
    <!--  사용자별 css file 추가 부분 -->
</head>

<!-- 사용자 페이지별 javascript file -->
<th:block layout:fragment="customJsFile">

</th:block>

<!-- 사용자별 스크립트 작성 -->
<th:block layout:fragment="customJsCode">
    <script>
        function toggleInput() {
            let selectElement = document.getElementById('searchKey');
            let searchInput = document.getElementById('inputSearchValue');
            let searchSelect = document.getElementById('selectSearchValue');

            if (selectElement.value === 'corpValueFulfill') {
                searchInput.classList.add('hidden');
                searchSelect.classList.remove('hidden');
                searchInput.value = '';
            } else {
                searchInput.classList.remove('hidden');
                searchSelect.classList.add('hidden');
                searchSelect.value = '';
            }
        }
    </script>
</th:block>


<!--/* layout:decorate : 파일에서 사용자 정의로 선언한 조각에 작성한 html 코드 삽입 */-->
<th:block layout:fragment="customContents">

        <div th:each="l, index : ${corporateValueEvaluationList}" th:if="${index.index} < 1"
             class="sett-total-data admin-content-wrapper form-table" th:fragment="settlementInfoHeader">
            <div class="sett-total-item">
                <h5>오늘 들어온 심사 요청</h5>
                <div class="sett-total-item-data"><a class="today-add-count" th:href="@{#}"
                                                     th:text="${l.adminInvestmentRequestJudge.todayRequestCnt}">0</a>건
                </div>
            </div>
            <div class="sett-total-item">
                <h5>처리중</h5>
                <div class="sett-total-item-data"><a class="progress-add-count" th:href="@{#}"
                                                     th:text="${l.adminInvestmentRequestJudge.standbyCnt}">0</a>건
                </div>
            </div>
            <div class="sett-total-item">
                <h5>오늘 처리 완료</h5>
                <div class="sett-total-item-data"><a class="progress-completed-count" th:href="@{#}"
                                                     th:text="${l.adminInvestmentRequestJudge.todayProceedCnt}">0</a>건
                </div>
            </div>
            <div class="sett-total-item">
                <h5>심사 반려</h5>
                <div class="sett-total-item-data"><a class="progress-error-count" th:href="@{#}"
                                                     th:text="${l.adminInvestmentRequestJudge.rejectCnt}">0</a>건
                </div>
            </div>
        </div>

        <div th:include="~{admin/judgement/investment/search/corporate_value_evaluation_search :: searchFragment}"></div>
        <br>

        <h4 class="admin-content-title">기업가치 평가 목록</h4>

        <div class="admin-content-wrapper">

            <div class="data-info">
                <div class="list-count-area">
                    <ul>
                        <li>심사 요청 총 <span class="count-data total-list">0</span>건</li>
                        <li>선택 항목 총 <span class="count-data select-list-count">0</span>건</li>
                    </ul>
                </div>
                <div class="list-count-selector">
                    <select name="orderby">
                        <option value="regist_d">평가일 순</option>
                        <option value="regist_a">평가일 역순</option>
                        <option>-----------------</option>
                        <option value="project_name_d">평가 코드순</option>
                        <option value="project_name_a">평가 코드 역순</option>
                        <option>-----------------</option>
                        <option value="project_name_d">심사요청 제목순</option>
                        <option value="project_name_a">심사요청 제목역순</option>
                    </select>
                    <select name="count-select">
                        <option value="15">15개씩 보기</option>
                        <option value="20">20개씩 보기</option>
                        <option value="30">30개씩 보기</option>
                    </select>
                </div>
            </div>

            <table id="corporateValueTable" class="settlement-log">
                <thead>
                <tr>
                    <th>
                        <input type="checkbox" name="allSelect" id="allSelectBtn">
                    </th>
                    <th>투자 심사요청 코드</th>
                    <th>심사요청 제목</th>
                    <th>심사요청한 아이디</th>
                    <th>기업가치 평가 코드</th>
                    <th>심사한 아이디</th>
                    <th>평가된 기업가치</th>
                    <th>주당가격</th>
                    <th>평가 결과</th>
                    <th>기업가치 평가일</th>
                    <th>수정</th>
                    <th>삭제</th>
                </tr>
                </thead>
                <tbody>

                <tr th:if="${corporateValueEvaluationList == null}">
                    <td>
                        <input type="checkbox" name="selectList">
                    </td>
                    <td colspan="11">기업가치 평가 목록이 없습니다.</td>
                </tr>
                <tr th:unless="${corporateValueEvaluationList == null}" th:each="l : ${corporateValueEvaluationList}">
                    <td>
                        <input type="checkbox" name="selectList">
                    </td>
                    <td>
                        <a class="valueLink detail-link"
                           th:href="@{/admin/investment/view/judge(investmentRequestJudgeCode=${l.adminInvestmentRequestJudge.investmentRequestJudgeCode})}"
                           th:text="${l.adminInvestmentRequestJudge.investmentRequestJudgeCode}"></a>
                    </td>
                    <td th:text="${l.adminInvestmentRequestJudge.investmentRequestSubject}"></td>
                    <td th:text="${l.adminInvestmentRequestJudge.memberIdSeller}"></td>
                    <td>
                        <span th:if="${l.corporateValueEvaluationCode == null}">심사 대기중</span>
                        <a th:unless="${l.corporateValueEvaluationCode == null}" class="detail-link"
                           th:href="@{/admin/investment/view/corporate-value(corporateValueEvaluationCode=${l.corporateValueEvaluationCode})}"
                           th:text="${l.corporateValueEvaluationCode}"></a>
                    </td>
                    <td th:if="${l.memberId == null}">심사 대기중</td>
                    <td th:unless="${l.memberId == null}" th:text="${l.memberId}"></td>
                    <td th:unless="${l.evaluatedCorpValue == 0}"
                        th:text="${#numbers.formatInteger(l.evaluatedCorpValue,3,'COMMA')} + ' 원'"></td>
                    <td th:if="${l.evaluatedCorpValue == 0}">심사 대기중</td>
                    <td th:unless="${l.stockPrice == 0}"
                        th:text="${#numbers.formatInteger(l.stockPrice,3,'COMMA')} + ' 원'"></td>
                    <td th:if="${l.stockPrice == 0}">심사 대기중</td>
                    <td th:if="${l.corpValueFulfill == 0}">심사 대기</td>
                    <td th:if="${l.corpValueFulfill == 1}">심사 승인</td>
                    <td th:if="${l.corpValueFulfill == 2}">심사 반려</td>
                    <td th:if="${l.corpValueEvaluateDay == null}">심사 대기중</td>
                    <td th:unless="${l.corpValueEvaluateDay == null}" th:text="${l.corpValueEvaluateDay}"></td>
                    <td>
                        <a th:href="@{/admin/investment/update/corporate-value(corporateValueEvaluationCode=${l.corporateValueEvaluationCode})}">수정</a>
                    </td>
                    <td>
                        <a th:href="@{/admin/investment/delete/corporate-value(corporateValueEvaluationCode=${l.corporateValueEvaluationCode})}">삭제</a>
                    </td>
                </tr>
                </tbody>
            </table>
            <br>


            <div class="board-page-area">
                <div class="list-controller-inner">
                    <ul>
                        <li class="link-active"><a th:href="@{#}">1</a></li>
                        <li><a th:href="@{#}">2</a></li>
                        <li><a th:href="@{#}">3</a></li>
                        <li><a th:href="@{#}">4</a></li>
                        <li><a th:href="@{#}">5</a></li>
                        <li><a th:href="@{#}">6</a></li>
                    </ul>
                    <div class="list-btn-area">
                        <button class="prev-transfer">
                            <span>prev</span>
                        </button>
                        <button class="next-transfer">
                            <span>next</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="btn-area">
            <ul>
                <li>
                    <button id="orderBackBtn" class="submitBtn" type="button"
                            th:onclick="|location.href='@{/admin/investment/insert/corporate-value}'|">등록하기
                    </button>
                </li>
            </ul>
        </div>

</th:block>
</html>