<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  	  layout:decorate="~{user/layout/default}">
  	  
  	  <head>
		  <title>flocky</title>
		  <!--  사용자별 css file 추가 부분 -->
		  <!-- Link Swiper's CSS -->
		  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
		  <link rel="stylesheet" th:href="@{/user/css/swiper-event-css.css}" />
		  <link rel="stylesheet" th:href="@{/user/css/main_style.css}" />
  	  </head>
  	  
  	  
	 <!-- 사용자 페이지별 javascript file -->
	 <th:block layout:fragment="customJsFile">
		 <!-- Swiper JS -->
	  	 <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
 	  	 <script th:src="@{user/js/mainSwiperJs.js}"></script>

		 <!-- scroll to give class js code file -->
		 <script th:src="@{/user/js/scroll-active.js}"></script>
		 <!-- ajaxJs -->
		 <script th:src="@{/common/js/ajaxJs.js}"></script>
	</th:block>
	
	
	<!-- 사용자별 스크립트 작성 -->
	<th:block layout:fragment="customJsCode">

		<script>
			// md join swiper slide
			let mdJoinSwiper = new Swiper("#mdJoinProject .mySwiper", {
				slidesPerView: 3,
				grid: {
					rows: 2,
				},
				// spaceBetween: 20,
				pagination: {
					el: ".swiper-pagination",
					clickable: true,
				},
			});


			// rank tab function
			$('.tab-menu-btn li').on('click',function(){
				let tabData = $(this).attr('data-tab');
				$('.main-rank-area').removeClass('active');
				rankAjax(tabData, function(list){
					console.log(list);
					// 여기에서 작업
					$(`.main-rank-area`).addClass('active');
					$(`.main-rank-area ul li`).remove();

					$(list).each((idx, item) => {
						// append 로 수정해보기
						let listElement = "";
						listElement += "<li>";
						listElement += `	<a href='/user/donation/detail?projectCode=${item.projectCode}'>`;
						listElement += `      <em>${item.rankCount}</em>`;
						listElement += `      <div>`;
						listElement += `        <h5>${item.subject}</h5>`;
						listElement += "        <div class='product-detail-info'>";
						listElement += (tabData == 'achievementPercent')?"<p class='funding-percent'><span>"+item.achievementPercent+"</span>%</p>"
																		:"<p class='funding-percent'><span>"+item.likeCount+"</span>개</p>";
						listElement += "          <p class='category'>";
						listElement += (item.categoryName == '')?"<span>카테고리 없음</span>":"<span>"+item.categoryName+"</span>";
						listElement += "            ·" ;
						listElement += "            <span>"+item.projectType+"</span>";
						listElement += "          </p>";
						listElement += "        </div>";
						listElement += "        </div>";
						listElement += "      <div class='project-img' style=";
						listElement += (item.imageUrl == null)? "'background:#eee;'>": `'background:url("${item.imageUrl}") no-repeat center center / cover'`;
						listElement += "      </div>";
						listElement += "    </a>";
						listElement += "</li>";
						console.log(listElement);

						$(`.main-rank-area ul`).append(listElement);

					});
				})

				$('.tab-menu-btn li').removeClass('active');
				$(this).addClass('active');
			});

			// contents swiper slide
			let storeContentsSwiperSlide = new Swiper("#storeInnerGroup .contents-area", {
				slidesPerView: 6,
				spaceBetween: 20,
				navigation: {
					nextEl: "#storeInnerGroup .swiper-button-next",
					prevEl: "#storeInnerGroup .swiper-button-prev",
				},
			});



			$('#mdJoinProject, #project-rank').addClass('active');


		</script>


		
	</th:block>
	
	
  	<!--/* layout:decorate : 파일에서 사용자 정의로 선언한 조각에 작성한 html 코드 삽입 */-->
	<th:block layout:fragment="customContents">

		<!-- main swiper slide start -->
		<th:block th:replace="~{common/fragments/mainSlideFragments :: mainSlide}"></th:block>
		<!-- main swiper slide end -->

		<div class="main-wrap">
			<section class="main-section main-contents-1">
				<div class="container">
					<div id="mdJoinProject">
						<h3 class="main-title">
							<span class="section-name" th:if="${session.SID == null}">TODAY</span>
							<span class="section-name" th:unless="${session.SID == null}" th:text="${session.SNAME}"></span>
							<span th:unless="${session.SID == null}"> 님 </span>
							추천 프로젝트</h3>

						<!-- Swiper -->
						<div class="swiper mySwiper">
							<div class="swiper-wrapper">
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션! 지금 구매하면 한정 에디션 구매 선착 500명</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>
										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>
										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
								<div class="swiper-slide">
									<a th:href="@{#}">
										<div class="slide-img">
											<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
										</div>
										<div class="description">
											<div class="product-main-title">[글로벌23억] 보이지 않는 터치패드! 모키보 퓨전키보드 화이트 에디션!</div>
											<div class="product-detail-info">
												<span class="funding-percent">350%</span>
												<span class="category">테크·가전</span>
											</div>

										</div>
									</a>
								</div>
							</div>
							<div class="swiper-pagination"></div>
						</div>
					</div>
					<div id="project-rank">
						<div class="rang-title">
							<h3 class="main-title">
								실시간 랭킹
							</h3>
							<button id="rankReload" type="button">reload</button>
						</div>

						<div>
							<ul class="tab-menu-btn">
								<li data-tab="achievementPercent" class="active">펀딩 순위</li>
								<li data-tab="likeCount">찜하기 순위</li>
							</ul>
							<div class="main-rank-area active">
								<ul>
									<li th:if="${rankList == null}">
										등록된 프로젝트가 없습니다
									</li>

									<li th:unless="${rankList == null}" th:each="l : ${rankList}">
										<a th:href="@{/user/donation/detail?(projectCode=${l.projectCode})}">
											<em th:text="${l.rankCount}">순위</em>
											<div>
												<h5 th:text="${l.subject}">프로젝트 명</h5>
												<div class="product-detail-info">
													<p class="funding-percent"><span th:text="${l.achievementPercent}"></span>%</p>
													<p class="category" >
														<span th:if="${l.categoryName == ''}">카테고리없음</span>
														<span th:unless="${l.categoryName == ''}" th:text="${l.categoryName}">카테고리</span>
														·
														<span th:text="${l.projectType}">분류</span>
													</p>
												</div>
											</div>
											<div class="project-img"
												 th:style="|${l.imageUrl} == null ? 'background:#eee;':'background:url('${l.imageUrl}') no-repeat center center / cover'|" ></div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</section>

			<section id="storeInnerGroup" class="content-wrap scroll-action-area">
				<div class="main-section container">
					<h3 class="main-title">스토어 추천</h3>
					<!-- Swiper -->
					<div class="swiper mySwiper contents-area">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
							<div class="swiper-slide">
								<a th:href="@{#}">
									<div class="slide-thumb">
										<div th:style="'background-image: url('+ @{/user/images/thumb/thumb_img_1.jpg} +');'"></div>
									</div>
									<div class="description">
										<div class="product-main-title">내 손안의 스마트한 스튜디오, 저스트모바일 셔터그립2</div>
										<div class="product-detail-info">
											<span class="funding-percent">350%</span>
											<span class="category">테크·가전</span>
										</div>
									</div>
								</a>
							</div>
						</div>

					</div>
					<div class="swiper-button-next"></div>
					<div class="swiper-button-prev"></div>
				</div>

			</section>

			<section id="bannerArea" class="content-wrap scroll-action-area">
				<div class="container">
					<div class="banner-content">
						<a th:href="@{/user/board/event_1}">
							<div th:style="'background-image: url('+ @{/user/images/EVENT_BANNER_1.png} +');'"></div>
						</a>
					</div>
					<div class="banner-content">
						<a th:href="@{#}">
							<div th:style="'background-image: url('+ @{/user/images/EVENT_BANNER_2.png} +');'"></div>
						</a>
					</div>
				</div>
			</section>

			<!-- reward Swiper area -->
			<th:block th:replace="~{user/fragments/mainSwiperFragments :: rewardContentsSwiperSlide}"></th:block>

			<!-- donation Swiper area -->
			<th:block th:replace="~{user/fragments/mainSwiperFragments :: donationContentsSwiperSlide}"></th:block>

			<!-- invest Swiper area -->
			<th:block th:replace="~{user/fragments/mainSwiperFragments :: investContentsSwiperSlide}"></th:block>


			<section id="btEventBanner" class="main-section container">

				<div class="contents-area">
					<h3>플로키에서 지금 바로 프로젝트를 시작하세요</h3>
					<p>이미 많은 스토어가 플로키를 경험했어요</p>
					<a class="link-btn" th:href="@{/user/board/event}">
						<span>이벤트 바로가기</span>
					</a>
				</div>
			</section>
		</div>
	</th:block>
</html>